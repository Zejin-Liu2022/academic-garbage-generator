# 文件夹管理和搜索功能测试指南

## 新增功能概览

### 1. 文件夹分类管理
- ✅ 创建自定义文件夹
- ✅ 重命名文件夹
- ✅ 删除文件夹（文档自动移至"未分类"）
- ✅ 文件夹文档计数
- ✅ 移动文档到不同文件夹

### 2. 关键词搜索
- ✅ 实时搜索文档标题
- ✅ 搜索结果即时显示
- ✅ 空搜索显示全部文档

### 3. 文档元数据显示
- ✅ 字数统计
- ✅ 段落数统计
- ✅ 修改时间显示

### 4. 排序功能
- ✅ 按修改时间排序（默认）
- ✅ 按创建时间排序
- ✅ 按标题排序

## 测试步骤

### 测试1：文件夹管理
1. 打开左侧边栏（点击左上角菜单按钮）
2. 点击"文件夹"区域的 `+` 图标
3. 输入文件夹名称（例如："课程论文"）
4. 观察文件夹列表中新增了该文件夹，显示文档数量 (0)
5. 点击文件夹名称旁的编辑图标，重命名为"学术论文"
6. 创建多个文件夹（例如："报告"、"草稿"等）

### 测试2：移动文档到文件夹
1. 创建几个新文档（点击"新建写作"按钮）
2. 在文档列表中，将鼠标悬停在文档项上
3. 点击文件夹图标（📁）
4. 从弹出菜单中选择目标文件夹
5. 观察文件夹计数更新
6. 点击文件夹名称，查看该文件夹下的文档

### 测试3：搜索功能
1. 确保有多个文档，标题各不相同
2. 在搜索框中输入关键词（例如："论文"）
3. 观察文档列表实时过滤
4. 清空搜索框，观察所有文档重新显示

### 测试4：排序功能
1. 创建几个文档，标题分别为 A、C、B
2. 修改其中一个文档的内容
3. 使用排序下拉菜单切换不同排序方式
4. 观察文档列表顺序变化：
   - 按修改时间：最近修改的在前
   - 按创建时间：最新创建的在前
   - 按标题：A、B、C 字母顺序

### 测试5：文档元数据
1. 打开任意文档
2. 添加一些内容（多个段落）
3. 打开左侧边栏
4. 观察文档列表项下方显示：
   - 修改时间（MM-DD HH:MM）
   - 字数（不含空格）
   - 段落数（`<p>` 标签数量）

### 测试6：文件夹筛选 + 搜索组合
1. 选择某个文件夹
2. 在搜索框中输入关键词
3. 观察只显示该文件夹内匹配关键词的文档

### 测试7：删除文件夹
1. 创建一个新文件夹，移动一些文档进去
2. 点击文件夹的删除图标（🗑️）
3. 确认删除
4. 观察文档自动移至"未分类"文件夹

### 测试8：全部文档视图
1. 选择不同的文件夹
2. 点击"全部文档"
3. 观察显示所有文档，不受文件夹限制

## 预期行为

### UI 状态
- 选中的文件夹/文档应有蓝色高亮背景
- 悬停时按钮（重命名、删除、移动）才显示
- 文件夹菜单应在按钮下方弹出
- 点击菜单外区域应关闭菜单

### 数据持久化
- 所有操作（创建、删除、移动、重命名）应立即保存到 localStorage
- 刷新页面后数据应保持
- 关闭浏览器后重新打开，数据仍然存在

### 边界情况
- 删除"未分类"文件夹的按钮不应显示
- 搜索无结果时显示"未找到匹配的文档"
- 文件夹为空时显示文档数为 0
- 删除文件夹时应提示确认

## 已知问题和限制

1. **浏览器兼容性**：使用了现代 JavaScript 特性，建议使用 Chrome/Edge/Firefox 最新版本
2. **数据存储**：使用 localStorage，有 5-10MB 限制，大量文档可能超限
3. **搜索功能**：目前仅搜索标题，不搜索正文内容

## 故障排查

### 如果功能不工作
1. 打开浏览器开发者工具（F12）
2. 查看 Console 标签是否有错误信息
3. 检查 localStorage 是否被浏览器禁用（隐私模式）
4. 清除缓存后刷新页面

### 常见错误
- `renderFolderList is not defined`：检查 ui.js 是否正确加载
- `StorageManager.getFolders is not a function`：检查 storage.js 加载顺序
- 文件夹菜单位置错误：可能是滚动导致，重新打开菜单

## 后续改进建议

1. **拖拽功能**：支持拖拽文档到文件夹
2. **批量操作**：多选文档批量移动
3. **全文搜索**：搜索文档正文内容
4. **文件夹颜色**：为文件夹设置不同颜色标识
5. **文档标签**：支持为文档添加多个标签
6. **数据导出/导入**：备份和恢复所有文档
7. **云同步**：支持多设备同步

---

**测试完成后，请在 GitHub Issues 中反馈发现的问题！**
